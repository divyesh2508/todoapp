<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="icon" href="./images//favicon.svg" />
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-KK94CHFLLe+nY2dmCWGMq91rCGa5gtU4mk92HdvYe+M/SXH301p5ILy+dN9+nJOZ"
      crossorigin="anonymous"
    />
    <title>JobFunders match report</title>

    <style>
      @import url('https://fonts.googleapis.com/css2?family=Poppins:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,100;1,200;1,300;1,400;1,500;1,600;1,700;1,800;1,900&display=swap');

      body {
        font-family: 'Poppins', sans-serif;
        color: #95969d;
        margin: 0;
        padding: 0;
        font-size: 18px;
        line-height: 29px;
      }

      @page {
        size: A4;
        margin: 0 15mm 0;
        padding: 20mm;
      }

      .custom-btn {
        border-radius: 10px;
        padding: 8px 20px;
        font-size: 25px;
        font-weight: 600;
        border: none;
        display: inline-flex;
        height: 54px;
        align-items: center;
        justify-content: center;
      }

      .dark-custom-btn {
        background-color: #264a6c;
        color: #d9e6f2;
      }

      .light-custom-btn {
        background-color: #d9e6f2;
        color: #264a6c;
      }

      .founder-pdf-template {
        padding: 0 20px 20px;
      }

      .logo-section {
        display: flex;
        gap: 21px;
        margin-bottom: 40px;
      }

      .logo-section .powered {
        width: 176px;
        height: 58px;
        display: flex;
        align-items: center;
        justify-content: center;
        color: #ffffff;
        background-color: #264a6c;
        border-radius: 0 0 10px 10px;
        font-size: 20px;
        font-weight: 600;
      }

      .logo-section .logo {
        align-self: flex-end;
      }

      h1 {
        color: #152634;
        font-weight: 600;
        font-size: 30px;
        line-height: 60px;
        margin-bottom: 28px;
      }

      .social-list {
        display: flex;
        flex-direction: column;
        padding: 0;
        gap: 20px;
        margin-bottom: 42px;
      }

      .social-list li {
        display: flex;
        gap: 40px;
        align-items: center;
      }

      .social-list li p {
        color: #264a6c;
        font-size: 18px;
        margin-bottom: 0;
        word-break: break-word;
      }

      .about-box {
        display: flex;
        gap: 28px;
        padding: 20px;
        margin: 28px 0 58px;
        align-items: center;
      }

      .about-box p {
        color: #95969d;
      }

      .about-box img {
        flex-shrink: 0;
      }

      .match-box {
        display: flex;
        gap: 40px;
        justify-content: space-between;
        margin-bottom: 24px;
      }

      .match-box .must-have {
        width: 50%;
      }

      .match-main-box > p {
        margin: 32px 0;
      }

      .match-box .light-custom-btn {
        margin-bottom: 32px;
      }

      .match-box ul {
        display: flex;
        flex-direction: column;
        padding-left: 0;
        margin-bottom: 10px;
      }

      .match-box li {
        position: relative;
        color: #152634;
        list-style: none;
        display: flex;
        gap: 52px;
        padding: 10px 0;
      }

      .match-box li img {
        /* position: absolute;
          left: -82px;
          top: 2px; */
        /* width: 30px; */
        /* height: 28px; */
        background-color: #ffffff;
        flex-shrink: 0;
        border-radius: 100px;
      }

      .match-box li:first-child::before {
        display: none;
      }

      .match-box li:first-child span {
        color: #95969d;
        font-size: 16px;
      }

      .match-box li p {
        color: #264a6c;
        font-size: 16px;
        margin-bottom: 0;
      }

      .match-box li .lang {
        display: flex;
        gap: 10px;
      }

      .selection-box {
        margin-bottom: 50px;
        max-width: 900px;
        width: 100%;
      }

      .selection-box ul {
        padding-left: 0;
      }

      .selection-box .light-custom-btn {
        margin-bottom: 40px;
      }

      .selection-box ul li {
        display: flex;
        align-items: center;
        margin-bottom: 0;
        color: #264a6c;
        gap: 40px;
        margin-bottom: 30px;
      }

      .selection-box ul .yes-no-box {
        display: flex;
        gap: 35px;
        margin-left: auto;
      }

      .selection-box ul .yes-no-box .box {
        display: flex;
        align-items: center;
        gap: 12px;
      }

      .culture-box .dark-custom-btn {
        margin-bottom: 32px;
      }

      .culture-box p {
        margin-bottom: 27px;
      }

      .bar-code-footer {
        display: flex;
        gap: 20px;
        margin-top: 30px;
        justify-content: flex-end;
      }

      .bar-code-footer p {
        align-self: flex-end;
        margin-bottom: 0;
      }

      .bar-code-footer img,
      .about-box img {
        width: 70px;
        height: 70px;
        cursor: pointer;
      }
    </style>
    <!-- script added for chart -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  </head>

  <body>
    <div class="founder-pdf-template">
      <div class="logo-section">
        <div class="powered">Powered by</div>
        <img
          src="https://test-matcho.s3.eu-central-1.amazonaws.com/candidate/logo.svg"
          alt="Logo"
          class="logo"
        />
      </div>
      <h1>
        <%= companyName %> - <%= translate['title'] %> <br />
        <%= translate['vacancy'] %> "<%= vacancyName %>"
      </h1>

      <ul class="social-list">
        <li>
          <img
            src="https://jobfunderstest.blob.core.windows.net/jobfunders-test/candidate/calendar.svg"
            alt="Calendar Icon"
          />
          <p><%= date %></p>
        </li>
        <li>
          <img
            src="https://test-matcho.s3.eu-central-1.amazonaws.com/candidate/map.svg"
            alt="Map Icon"
          />
          <p><%= `${city} (${country})` %></p>
        </li>
      </ul>

      <div class="about-candidate">
        <div class="dark-custom-btn custom-btn">
          <%=translate['About the candidate']%>
        </div>
        <div class="about-box">
          <a href="https://test.jobfunders.com/candidate/<%=id%>">
            <img src="<%=qrCode%>" alt="Barcode" />
          </a>
          <p><%=translate['candidateText']%></p>
        </div>
      </div>
      <% if(motivationText){ %>
      <div class="about-candidate">
        <div class="dark-custom-btn custom-btn">
          <%=translate['Candidate motivation']%>
        </div>
        <div class="about-box">
          <p><%= motivationText %></p>
        </div>
      </div>
      <% } %>
      <div class="match-main-box">
        <% if(mustHaveHardSkills.length> 0 || mustHaveSoftSkills.length > 0 ||
        mustHaveLanguages.length > 0 || experiences.length > 0 ||
        educations.length > 0 || niceToHaveSoftSkills.length> 0 ||
        niceToHaveHardSkills.length > 0 || niceToHaveLanguages.length > 0) {%>
        <div class="dark-custom-btn custom-btn">
          <%=translate['Match with the job requirements']%>
        </div>
        <p><%=translate['jobText']%></p>

        <div class="match-box">
          <% if(mustHaveHardSkills.length> 0 || mustHaveSoftSkills.length > 0 ||
          mustHaveLanguages.length > 0 || experiences.length > 0 ||
          educations.length > 0) %>
          <div class="must-have">
            <div class="light-custom-btn custom-btn">
              <%=translate['Must-have criteria']%>
            </div>
            <% if(mustHaveSoftSkills.length> 0){%>
            <ul>
              <li><span>OK?</span> <span>Soft-skills</span></li>
              <% mustHaveSoftSkills.forEach(skill=> { %>
              <li>
                <div class="icon">
                  <% if (skill.isPresent) { %>
                  <img
                    src="https://jobfunderstest.blob.core.windows.net/jobfunders-test/candidate/tick2"
                    alt="Present Icon"
                  />
                  <% } else { %>
                  <img
                    src="https://jobfunderstest.blob.core.windows.net/jobfunders-test/candidate/questionMark"
                    alt="Not Present Icon"
                  />
                  <% } %>
                </div>
                <%= skill.name %>
              </li>

              <% }) %>
            </ul>
            <% } %> <% if(mustHaveHardSkills.length> 0){%>
            <ul>
              <li><span>OK?</span> <span>Hard-skills</span></li>
              <% mustHaveHardSkills.forEach(skill=> { %>
              <li>
                <div class="icon">
                  <% if (skill.isPresent) { %>
                  <img
                    src="https://jobfunderstest.blob.core.windows.net/jobfunders-test/candidate/tick2"
                    alt="Present Icon"
                  />
                  <% } else { %>
                  <img
                    src="https://jobfunderstest.blob.core.windows.net/jobfunders-test/candidate/questionMark"
                    alt="Not Present Icon"
                  />
                  <% } %>
                </div>
                <%= skill.name %>
              </li>
              <% }) %>
            </ul>
            <% } %> <% if(mustHaveLanguages.length> 0){%>
            <ul>
              <li><span>OK?</span> <span>Language-skills</span></li>
              <% mustHaveLanguages.forEach(skill=> { %>
              <li>
                <div class="icon">
                  <% if (skill.isPresent) { %>
                  <img
                    src="https://jobfunderstest.blob.core.windows.net/jobfunders-test/candidate/tick2"
                    alt="Present Icon"
                  />
                  <% } else { %>
                  <img
                    src="https://jobfunderstest.blob.core.windows.net/jobfunders-test/candidate/questionMark"
                    alt="Not Present Icon"
                  />
                  <% } %>
                </div>
                <div class="lang">
                  <%= skill.langName %>
                  <p>
                    <%= translate['required'] %>: <%= translate['level'] %> <%=
                    skill.level %>
                  </p>
                </div>
              </li>
              <% }) %>
            </ul>

            <% } %> <% if(experiences.length> 0){%>
            <ul>
              <li><span>OK?</span> <span>Experience</span></li>
              <% experiences.forEach(experience=> { %>
              <li>
                <div class="icon">
                  <% if (experience.isPresent) { %>
                  <img
                    src="https://jobfunderstest.blob.core.windows.net/jobfunders-test/candidate/tick2"
                    alt="Present Icon"
                  />
                  <% } else { %>
                  <img
                    src="https://jobfunderstest.blob.core.windows.net/jobfunders-test/candidate/questionMark"
                    alt="Not Present Icon"
                  />
                  <% } %>
                </div>
                <%=experience.name %>
              </li>
              <% }) %>
            </ul>
            <% } %> <% if(educations.length> 0){%>
            <ul>
              <li><span>OK?</span> <span>Education</span></li>
              <% educations.forEach(education=> { %>
              <li>
                <div class="icon">
                  <% if (education.isPresent) { %>
                  <img
                    src="https://jobfunderstest.blob.core.windows.net/jobfunders-test/candidate/tick2"
                    alt="Present Icon"
                  />
                  <% } else { %>
                  <img
                    src="https://jobfunderstest.blob.core.windows.net/jobfunders-test/candidate/questionMark"
                    alt="Not Present Icon"
                  />
                  <% } %>
                </div>
                <%=education.name %>
              </li>
              <% }) %>
            </ul>
            <% } %>
          </div>

          <% if (niceToHaveSoftSkills.length> 0 || niceToHaveHardSkills.length >
          0 || niceToHaveLanguages.length > 0 ) {%>
          <div class="must-have">
            <div class="light-custom-btn custom-btn" style="width: 350px">
              <%=translate['Nice-to-have criteria']%>
            </div>
            <% if(niceToHaveSoftSkills.length> 0){%>
            <ul>
              <li><span>OK?</span> <span>Soft-skills</span></li>
              <% niceToHaveSoftSkills.forEach(skill=> { %>
              <li>
                <div class="icon">
                  <% if (skill.isPresent) { %>
                  <img
                    src="https://jobfunderstest.blob.core.windows.net/jobfunders-test/candidate/tick2"
                    alt="Present Icon"
                  />
                  <% } else { %>
                  <img
                    src="https://jobfunderstest.blob.core.windows.net/jobfunders-test/candidate/questionMark"
                    alt="Not Present Icon"
                  />
                  <% } %>
                </div>
                <%=skill.name%>
              </li>
              <% }) %>
            </ul>
            <% } %> <% if(niceToHaveHardSkills.length> 0){%>
            <ul>
              <li><span>OK?</span> <span>Hard-skills</span></li>
              <% niceToHaveHardSkills.forEach(skill=> { %>
              <li>
                <div class="icon">
                  <% if (skill.isPresent) { %>
                  <img
                    src="https://jobfunderstest.blob.core.windows.net/jobfunders-test/candidate/tick2"
                    alt="Present Icon"
                  />
                  <% } else { %>
                  <img
                    src="https://jobfunderstest.blob.core.windows.net/jobfunders-test/candidate/questionMark"
                    alt="Not Present Icon"
                  />
                  <% } %>
                </div>
                <%=skill.name%>
              </li>
              <% }) %>
            </ul>
            <% } %> <% if(niceToHaveLanguages.length> 0){%>
            <ul>
              <li><span>OK?</span> <span>Language-skills</span></li>
              <% niceToHaveLanguages.forEach(skill=> { %>
              <li>
                <div class="icon">
                  <% if (skill.isPresent) { %>
                  <img
                    src="https://jobfunderstest.blob.core.windows.net/jobfunders-test/candidate/tick2"
                    alt="Present Icon"
                  />
                  <% } else { %>
                  <img
                    src="https://jobfunderstest.blob.core.windows.net/jobfunders-test/candidate/questionMark"
                    alt="Not Present Icon"
                  />
                  <% } %>
                </div>
                <div class="lang">
                  <%= skill.langName %>
                  <p>
                    <%= translate['required'] %>: <%= translate['level'] %> <%=
                    skill.level %>
                  </p>
                </div>
              </li>
              <% }) %>
            </ul>
            <% } %>
          </div>
          <% } %>
        </div>
        <% } %> <% if (questions.length> 0) { %>
        <div class="selection-box">
          <div class="light-custom-btn custom-btn">
            <%=translate['Pre-selection questions']%>
          </div>
          <ul>
            <% questions.forEach(question=> { %>
            <li>
              <%= question.question %>
              <div class="yes-no-box">
                <div class="box">
                  <% if (question.answers && question.answers.answer==='yes' ) {
                  %>
                  <img
                    src="https://jobfunderstest.blob.core.windows.net/jobfunders-test/candidate/tick.png"
                    alt=""
                  /><%=translate['Yes']%> <% } else { %>
                  <img
                    src="https://jobfunderstest.blob.core.windows.net/jobfunders-test/candidate/circle"
                    alt=""
                  /><%=translate['Yes']%> <% } %>
                </div>
                <div class="box">
                  <% if (question.answers && (question.answers.answer==='no'||
                  question.answers.answer === "") ) { %>
                  <img
                    src="https://jobfunderstest.blob.core.windows.net/jobfunders-test/candidate/tick.png"
                    alt=""
                  /><%=translate['No']%> <% } else { %>
                  <img
                    src="https://jobfunderstest.blob.core.windows.net/jobfunders-test/candidate/circle"
                    alt=""
                  /><%=translate['No']%> <% } %>
                </div>
              </div>
            </li>
            <% }) %>
          </ul>
        </div>
        <% } %> <% if(cultralFitQueForCandidate.length > 0 ||
        cultralFitQueForCompany.length > 0) { %>
        <div class="culture-box">
          <div class="dark-custom-btn custom-btn">
            <%=translate['Match with the company culture']%>
          </div>
          <p><%=translate['graphText']%></p>
          <div class="chart">
            <canvas id="radarChart"></canvas>

            <script>
              // Here we are giving the images associated with the labels
              const icons = [
                'https://jobfunderstest.blob.core.windows.net/jobfunders-test/candidate/open_communication',
                'https://jobfunderstest.blob.core.windows.net/jobfunders-test/candidate/innovation',
                'https://jobfunderstest.blob.core.windows.net/jobfunders-test/candidate/employee_well_being',
                'https://jobfunderstest.blob.core.windows.net/jobfunders-test/candidate/diversity_and_inclusion',
                'https://jobfunderstest.blob.core.windows.net/jobfunders-test/candidate/performance_recognition',
                'https://jobfunderstest.blob.core.windows.net/jobfunders-test/candidate/team_collaboration',
                'https://jobfunderstest.blob.core.windows.net/jobfunders-test/candidate/leadership_style',
                'https://jobfunderstest.blob.core.windows.net/jobfunders-test/candidate/adaptability',
                'https://jobfunderstest.blob.core.windows.net/jobfunders-test/candidate/social_responsibility',
                'https://jobfunderstest.blob.core.windows.net/jobfunders-test/candidate/learning_and_development',
              ];

              document.addEventListener('DOMContentLoaded', function () {
                // All the labels for the Radar Chart
                const labels = [
                  "<%= translate['Open Communication'] %>",
                  "<%=translate['Innovation']%>",
                  "<%=translate['Employee Well-being']%>",
                  "<%=translate['Diversity and Inclusion']%>",
                  "<%=translate['Performance Recognition']%>",
                  "<%=translate['Team Collaboration']%>",
                  "<%=translate['Leadership Style']%>",
                  "<%=translate['Adaptability']%>",
                  "<%=translate['Social Responsibility']%>",
                  "<%=translate['Learning and Development']%>",
                ];
                let cultralFitQueForCandidate =
                  '<%= cultralFitQueForCandidate %>';
                let cultralFitQueForCompany = '<%= cultralFitQueForCompany %>';
                let scoresForCandidate = cultralFitQueForCandidate.length
                  ? cultralFitQueForCandidate.split(',').map(Number)
                  : [];
                let scoresForCompany = cultralFitQueForCompany.length
                  ? cultralFitQueForCompany.split(',').map(Number)
                  : [];

                const data = {
                  labels: labels,
                  datasets: [],
                };

                if (scoresForCompany.length > 0) {
                  data.datasets.push({
                    label: `<%= companyName %>`,
                    order: 1,
                    data: scoresForCompany,
                    fill: true,
                    backgroundColor: 'rgba(255, 159, 64, 0.2)',
                    pointBackgroundColor: 'rgba(255, 159, 64, 1)',
                    borderColor: 'rgba(255, 159, 64, 1)',
                    pointHoverBackgroundColor: '#fff',
                    pointBorderColor: '#fff',
                    borderWidth: 0,
                  });
                }

                if (scoresForCandidate.length > 0) {
                  data.datasets.push({
                    label: 'The Candidate',
                    order: 2,
                    data: scoresForCandidate,
                    fill: true,
                    backgroundColor: 'rgba(217, 230, 242, 0.8)',
                    pointBackgroundColor: 'rgba(4, 49, 122, 0.8)',
                    borderColor: 'rgba(217, 230, 242, 1)',
                    pointHoverBackgroundColor: '#fff',
                    pointBorderColor: '#fff',
                    borderWidth: 0,
                  });
                }

                const radarIcons = {
                  id: 'radarIcons',
                  beforeDatasetsDraw(chart, args, plugins) {
                    const {
                      ctx,
                      scales: { r },
                    } = chart;
                    const xCenter = r.xCenter;
                    const yCenter = r.yCenter;
                    const drawingArea = r.drawingArea;
                    const iconSize = 20; // Increased icon size
                    const fontSize = 14; // Font size for labels
                    const baseOffset = 22; // Base offset
                    const labelColor = 'rgba(128, 128, 128, 1)'; // Color for labels
                    const maxLineWidth = 150; // Maximum width for each line of the label

                    // Function to split label into multiple lines based on maxLineWidth
                    function splitLabelIntoLines(ctx, label, maxWidth) {
                      const words = label.split(' ');
                      const lines = [];
                      let currentLine = words[0];

                      for (let i = 1; i < words.length; i++) {
                        const word = words[i];
                        const width = ctx.measureText(
                          currentLine + ' ' + word
                        ).width;
                        if (width < maxWidth) {
                          currentLine += ' ' + word;
                        } else {
                          lines.push(currentLine);
                          currentLine = word;
                        }
                      }
                      lines.push(currentLine);
                      return lines;
                    }
                    // Drawing the icons
                    icons.forEach((icon, index) => {
                      ctx.save();
                      const angle =
                        index * ((2 * Math.PI) / icons.length) - Math.PI / 2;

                      // Adjusting offset dynamically for specific labels to avoid overlap
                      let offset = baseOffset;
                      if (index === 2 || index === 3) {
                        // Managing the indices that are overlapping
                        offset -= 5; // Adjusting this decrementally based on our needs
                      } else if (index === 0 || index === 1 || index === 9) {
                        offset += 15; // Adjusting this incrementally based on our needs
                      }

                      const x =
                        xCenter + Math.cos(angle) * (drawingArea + offset);
                      const y =
                        yCenter + Math.sin(angle) * (drawingArea + offset);

                      const image = new Image();
                      image.src = icon;
                      image.onload = function () {
                        // Draw the icon
                        ctx.drawImage(
                          image,
                          x - iconSize / 2,
                          y - iconSize / 2,
                          iconSize,
                          iconSize
                        );

                        // Set font properties
                        ctx.font = `${fontSize}px Arial`;
                        ctx.fillStyle = labelColor; // Change this to your preferred color
                        ctx.textAlign = 'center';

                        // Get the label and split it into multiple lines if necessary
                        const label = labels[index];
                        const labelLines = splitLabelIntoLines(
                          ctx,
                          label,
                          maxLineWidth
                        );
                        const textOffsetY = iconSize + 5; // Distance between icon and the first line of text

                        // Adjust text alignment based on angle
                        if (angle < -Math.PI / 2 || angle > Math.PI / 2) {
                          // When on the left side of the radar, move the text left
                          ctx.textAlign = 'right';
                        } else if (
                          angle > -Math.PI / 2 &&
                          angle < Math.PI / 2
                        ) {
                          // When on the right side of the radar, move the text right
                          ctx.textAlign = 'left';
                        } else {
                          // Center the text by default
                          ctx.textAlign = 'center';
                        }

                        // Draw each line of the label
                        labelLines.forEach((line, lineIndex) => {
                          const lineY =
                            y + textOffsetY + lineIndex * (fontSize + 2); // Adjust spacing between lines
                          ctx.fillText(line, x, lineY);
                        });
                      };
                      ctx.restore();
                    });
                  },
                };

                // Custom plugin for percentage text in the center
                const centerText = {
                  id: 'centerText',
                  afterDraw(chart) {
                    if (data.datasets.length === 2) {
                      // Only show if both datasets are present
                      const { ctx, width, height } = chart;
                      const text = `<%- matchPercentage %>`;
                      const text2 = 'Match';
                      ctx.save();
                      ctx.font = '20px Arial';
                      ctx.fillStyle = '#000';
                      ctx.textAlign = 'center';
                      ctx.textBaseline = 'middle';
                      ctx.fillText(text, width / 2 + 7, height / 2 - 7);
                      ctx.font = '16px Arial';
                      ctx.fillText(text2, width / 2 + 7, height / 2 + 13);
                      ctx.restore();
                    }
                  },
                };

                const customLegendPlugin = {
                  id: 'customLegend',
                  beforeDraw(chart) {
                    // Hide default legend items
                    const legend = chart.legend;
                    legend.options.display = false;
                  },
                  afterDraw(chart) {
                    const legend = chart.legend;
                    const ctx = chart.ctx;
                    const legendItems = legend.legendItems;
                    const iconSize = 20;
                    const radius = iconSize / 2;

                    const totalItems = legendItems.length;
                    const itemSpacing = 90; // Spacing between legend items
                    const totalWidth =
                      (totalItems / 2) * (itemSpacing + iconSize);

                    // Calculate new centered position for the legend
                    const chartWidth = chart.width;
                    const legendX = (chartWidth - totalWidth) / 2; // Center the legend horizontally
                    const legendY = chart.height - 50; // Adjust this value for vertical positioning

                    // Draw custom radar chart-like shapes in the legend
                    legendItems.forEach((item, index) => {
                      // Calculate x and y for each legend item
                      const x =
                        legendX + (index % 2) * (itemSpacing + iconSize);
                      const y =
                        legendY +
                        Math.floor(index / 2) * (itemSpacing + iconSize);

                      const dataset = chart.data.datasets[index];
                      const data = dataset.data;
                      const angleSlice = (2 * Math.PI) / data.length;
                      const centerX = x + radius;
                      const centerY = y + radius;

                      // Draw custom radar chart-like shapes
                      ctx.save();
                      ctx.translate(centerX, centerY);
                      ctx.rotate(-Math.PI / 2);
                      ctx.beginPath();

                      data.forEach((value, i) => {
                        const angle = i * angleSlice;
                        const radiusAdjusted =
                          (value / Math.max(...data)) * radius;
                        const xPoint = radiusAdjusted * Math.cos(angle);
                        const yPoint = radiusAdjusted * Math.sin(angle);
                        if (i === 0) {
                          ctx.moveTo(xPoint, yPoint);
                        } else {
                          ctx.lineTo(xPoint, yPoint);
                        }
                      });
                      ctx.closePath();
                      ctx.fillStyle = dataset.backgroundColor;
                      ctx.fill();
                      ctx.strokeStyle = dataset.borderColor;
                      ctx.stroke();
                      ctx.restore();

                      // Draw labels next to the custom shapes
                      ctx.save();
                      ctx.font = '12px Arial';
                      ctx.fillStyle = item.textColor || '#000'; // Use item.textColor if available
                      ctx.textAlign = 'left';
                      ctx.textBaseline = 'middle';
                      ctx.fillText(item.text, x + iconSize + 5, y + radius);
                      ctx.restore();
                    });
                  },
                };

                const config = {
                  type: 'radar',
                  data: data,
                  options: {
                    scales: {
                      r: {
                        min: 0,
                        max: 5,
                        grid: {
                          circular: true,
                          color: 'rgba(0, 0, 0, 0.2)',
                        },
                        ticks: {
                          display: true, // Hiding the grid line labels
                          stepSize: 1,
                        },
                        pointLabels: {
                          display: false,
                        },
                        beginAtZero: true,
                      },
                    },
                    plugins: {
                      legend: {
                        display: false,
                        position: 'bottom',
                      },
                    },
                    layout: {
                      padding: {
                        left: 160,
                        right: 150,
                      }, // Adjust padding to reduce overall size
                    },
                  },
                  plugins: [radarIcons, centerText, customLegendPlugin],
                };

                const radarChart = new Chart(
                  document.getElementById('radarChart'),
                  config
                );
              });
            </script>
          </div>
        </div>
        <% } %>
      </div>

      <div class="bar-code-footer">
        <p><%=translate['See more']%></p>
        <a href="https://stag.jobfunders.com/candidate/<%=id%>">
          <img src="<%=qrCode%>" alt="Barcode" />
        </a>
      </div>
    </div>
  </body>
</html>